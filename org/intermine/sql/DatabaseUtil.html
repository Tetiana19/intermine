<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.11-ea) on Mon Apr 26 18:07:34 BST 2021 -->
<title>DatabaseUtil (intermine unspecified API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-04-26">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DatabaseUtil (intermine unspecified API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":9,"i16":9,"i17":9,"i18":9,"i19":9,"i20":9,"i21":9,"i22":9,"i23":9,"i24":9,"i25":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.intermine.sql</a></div>
<h2 title="Class DatabaseUtil" class="title">Class DatabaseUtil</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.intermine.sql.DatabaseUtil</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public final class <span class="typeNameLabel">DatabaseUtil</span>
extends java.lang.Object</pre>
<div class="block">Collection of commonly used Database utilities</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Andrew Varley, Matthew Wakeling</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addColumn(java.sql.Connection,java.lang.String,java.lang.String,org.intermine.sql.DatabaseUtil.Type)">addColumn</a></span>&#8203;(java.sql.Connection&nbsp;con,
         java.lang.String&nbsp;tableName,
         java.lang.String&nbsp;columnName,
         <a href="DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)</code></th>
<td class="colLast">
<div class="block">Add a column to an existing database table, if it does not already exist.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addColumn(org.intermine.sql.Database,java.lang.String,java.lang.String,org.intermine.sql.DatabaseUtil.Type)">addColumn</a></span>&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
         java.lang.String&nbsp;tableName,
         java.lang.String&nbsp;columnName,
         <a href="DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)</code></th>
<td class="colLast">
<div class="block">Add a column in the table specified in input.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#analyse(org.intermine.sql.Database,boolean)">analyse</a></span>&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
       boolean&nbsp;full)</code></th>
<td class="colLast">
<div class="block">Analyse given database, perform vacuum full analyse if full parameter true.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#analyse(org.intermine.sql.Database,org.intermine.metadata.ClassDescriptor,boolean)">analyse</a></span>&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
       <a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cld,
       boolean&nbsp;full)</code></th>
<td class="colLast">
<div class="block">Analyse database table for a given class and all associated indirection tables.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#columnExists(java.sql.Connection,java.lang.String,java.lang.String)">columnExists</a></span>&#8203;(java.sql.Connection&nbsp;con,
            java.lang.String&nbsp;tableName,
            java.lang.String&nbsp;columnName)</code></th>
<td class="colLast">
<div class="block">Tests if a column exists in the database</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createBagTable(org.intermine.sql.Database,java.sql.Connection,java.lang.String,java.util.Collection,java.lang.Class)">createBagTable</a></span>&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
              java.sql.Connection&nbsp;con,
              java.lang.String&nbsp;tableName,
              java.util.Collection&lt;?&gt;&nbsp;bag,
              java.lang.Class&lt;?&gt;&nbsp;c)</code></th>
<td class="colLast">
<div class="block">Create a new table the holds the contents of the given Collection (bag).</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createBagValuesTables(java.sql.Connection)">createBagValuesTables</a></span>&#8203;(java.sql.Connection&nbsp;con)</code></th>
<td class="colLast">
<div class="block">Create the table 'bagvalues' containing the values of the key field objects
 contained in a bag and an extra values</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateSqlCompatibleName(java.lang.String)">generateSqlCompatibleName</a></span>&#8203;(java.lang.String&nbsp;n)</code></th>
<td class="colLast">
<div class="block">Convert any sql keywords to valid names for tables/columns.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getColumnName(org.intermine.metadata.FieldDescriptor)">getColumnName</a></span>&#8203;(<a href="../metadata/FieldDescriptor.html" title="class in org.intermine.metadata">FieldDescriptor</a>&nbsp;fd)</code></th>
<td class="colLast">
<div class="block">Creates a column name for a field descriptor</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndirectionTableName(org.intermine.metadata.CollectionDescriptor)">getIndirectionTableName</a></span>&#8203;(<a href="../metadata/CollectionDescriptor.html" title="class in org.intermine.metadata">CollectionDescriptor</a>&nbsp;col)</code></th>
<td class="colLast">
<div class="block">Creates an indirection table name for a many-to-many collection descriptor</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static java.util.Set&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndirectionTableNames(org.intermine.metadata.ClassDescriptor)">getIndirectionTableNames</a></span>&#8203;(<a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cld)</code></th>
<td class="colLast">
<div class="block">Given a ClassDescriptor find names of all related indirection tables.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor,int)">getInwardIndirectionColumnName</a></span>&#8203;(<a href="../metadata/CollectionDescriptor.html" title="class in org.intermine.metadata">CollectionDescriptor</a>&nbsp;col,
                              int&nbsp;version)</code></th>
<td class="colLast">
<div class="block">Creates a column name for the "inward" key of a many-to-many collection descriptor.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOutwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor,int)">getOutwardIndirectionColumnName</a></span>&#8203;(<a href="../metadata/CollectionDescriptor.html" title="class in org.intermine.metadata">CollectionDescriptor</a>&nbsp;col,
                               int&nbsp;version)</code></th>
<td class="colLast">
<div class="block">Creates a column name for the "outward" key of a many-to-many collection descriptor.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTableDefinition(org.intermine.sql.Database,org.intermine.metadata.ClassDescriptor)">getTableDefinition</a></span>&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                  <a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cd)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTableName(org.intermine.metadata.ClassDescriptor)">getTableName</a></span>&#8203;(<a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cld)</code></th>
<td class="colLast">
<div class="block">Creates a table name for a class descriptor</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#grant(org.intermine.sql.Database,java.lang.String,java.lang.String)">grant</a></span>&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
     java.lang.String&nbsp;user,
     java.lang.String&nbsp;perm)</code></th>
<td class="colLast">
<div class="block">Grant permission on all tables for given user on specified database.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isBagValuesEmpty(java.sql.Connection)">isBagValuesEmpty</a></span>&#8203;(java.sql.Connection&nbsp;con)</code></th>
<td class="colLast">
<div class="block">Verify if 'bagvalues' table is empty</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isLegalColumnName(java.lang.String)">isLegalColumnName</a></span>&#8203;(java.lang.String&nbsp;name)</code></th>
<td class="colLast">
<div class="block">Check that a column name provided to us is a legal column name, to prevent SQL injection.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#objectToString(java.lang.Object)">objectToString</a></span>&#8203;(java.lang.Object&nbsp;o)</code></th>
<td class="colLast">
<div class="block">Generate an SQL compatible representation of an object.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeAllTables(java.sql.Connection)">removeAllTables</a></span>&#8203;(java.sql.Connection&nbsp;con)</code></th>
<td class="colLast">
<div class="block">Removes every single table from the database given.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeSequence(java.sql.Connection,java.lang.String)">removeSequence</a></span>&#8203;(java.sql.Connection&nbsp;con,
              java.lang.String&nbsp;sequence)</code></th>
<td class="colLast">
<div class="block">Remove the sequence from the database given.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeView(java.sql.Connection,java.lang.String)">removeView</a></span>&#8203;(java.sql.Connection&nbsp;con,
          java.lang.String&nbsp;view)</code></th>
<td class="colLast">
<div class="block">Remove the view from the database given.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tableExists(java.sql.Connection,java.lang.String)">tableExists</a></span>&#8203;(java.sql.Connection&nbsp;con,
           java.lang.String&nbsp;tableName)</code></th>
<td class="colLast">
<div class="block">Tests if a table exists in the database</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateColumnValue(java.sql.Connection,java.lang.String,java.lang.String,java.lang.Object)">updateColumnValue</a></span>&#8203;(java.sql.Connection&nbsp;con,
                 java.lang.String&nbsp;tableName,
                 java.lang.String&nbsp;columnName,
                 java.lang.Object&nbsp;newValue)</code></th>
<td class="colLast">
<div class="block">Set the default value in a column for all values.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateColumnValue(org.intermine.sql.Database,java.lang.String,java.lang.String,java.lang.Object)">updateColumnValue</a></span>&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
                 java.lang.String&nbsp;tableName,
                 java.lang.String&nbsp;columnName,
                 java.lang.Object&nbsp;newValue)</code></th>
<td class="colLast">
<div class="block">Set the default value in a column for all values where the current value is null.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verifyColumnType(java.sql.Connection,java.lang.String,java.lang.String,int)">verifyColumnType</a></span>&#8203;(java.sql.Connection&nbsp;con,
                java.lang.String&nbsp;tableName,
                java.lang.String&nbsp;columnName,
                int&nbsp;columnType)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="tableExists(java.sql.Connection,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tableExists</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;tableExists&#8203;(java.sql.Connection&nbsp;con,
                                  java.lang.String&nbsp;tableName)
                           throws java.sql.SQLException</pre>
<div class="block">Tests if a table exists in the database</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - a connection to a database</dd>
<dd><code>tableName</code> - the name of a table to test for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the table exists, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd>
<dd><code>java.lang.NullPointerException</code> - if tableName is null</dd>
</dl>
</li>
</ul>
<a id="columnExists(java.sql.Connection,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>columnExists</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;columnExists&#8203;(java.sql.Connection&nbsp;con,
                                   java.lang.String&nbsp;tableName,
                                   java.lang.String&nbsp;columnName)
                            throws java.sql.SQLException</pre>
<div class="block">Tests if a column exists in the database</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - a connection to a database</dd>
<dd><code>tableName</code> - the name of a table containing the column</dd>
<dd><code>columnName</code> - the name of the column to test for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the column exists, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd>
<dd><code>java.lang.NullPointerException</code> - if tableName is null</dd>
</dl>
</li>
</ul>
<a id="removeAllTables(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAllTables</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;removeAllTables&#8203;(java.sql.Connection&nbsp;con)
                            throws java.sql.SQLException</pre>
<div class="block">Removes every single table from the database given.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - the Connection to the database</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd>
</dl>
</li>
</ul>
<a id="removeSequence(java.sql.Connection,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeSequence</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;removeSequence&#8203;(java.sql.Connection&nbsp;con,
                                  java.lang.String&nbsp;sequence)
                           throws java.sql.SQLException</pre>
<div class="block">Remove the sequence from the database given.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - the Connection to the database</dd>
<dd><code>sequence</code> - the sequence to remove</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd>
</dl>
</li>
</ul>
<a id="removeView(java.sql.Connection,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeView</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;removeView&#8203;(java.sql.Connection&nbsp;con,
                              java.lang.String&nbsp;view)
                       throws java.sql.SQLException</pre>
<div class="block">Remove the view from the database given.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - the Connection to the database</dd>
<dd><code>view</code> - the view to remove</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd>
</dl>
</li>
</ul>
<a id="getTableName(org.intermine.metadata.ClassDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTableName</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getTableName&#8203;(<a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cld)</pre>
<div class="block">Creates a table name for a class descriptor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cld</code> - ClassDescriptor</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a valid table name</dd>
</dl>
</li>
</ul>
<a id="getColumnName(org.intermine.metadata.FieldDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getColumnName</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getColumnName&#8203;(<a href="../metadata/FieldDescriptor.html" title="class in org.intermine.metadata">FieldDescriptor</a>&nbsp;fd)</pre>
<div class="block">Creates a column name for a field descriptor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fd</code> - FieldDescriptor</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a valid column name</dd>
</dl>
</li>
</ul>
<a id="getIndirectionTableName(org.intermine.metadata.CollectionDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndirectionTableName</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getIndirectionTableName&#8203;(<a href="../metadata/CollectionDescriptor.html" title="class in org.intermine.metadata">CollectionDescriptor</a>&nbsp;col)</pre>
<div class="block">Creates an indirection table name for a many-to-many collection descriptor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>col</code> - CollectionDescriptor</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a valid table name</dd>
</dl>
</li>
</ul>
<a id="getInwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInwardIndirectionColumnName</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getInwardIndirectionColumnName&#8203;(<a href="../metadata/CollectionDescriptor.html" title="class in org.intermine.metadata">CollectionDescriptor</a>&nbsp;col,
                                                              int&nbsp;version)</pre>
<div class="block">Creates a column name for the "inward" key of a many-to-many collection descriptor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>col</code> - CollectionDescriptor</dd>
<dd><code>version</code> - the database version number</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a valid column name</dd>
</dl>
</li>
</ul>
<a id="getOutwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutwardIndirectionColumnName</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getOutwardIndirectionColumnName&#8203;(<a href="../metadata/CollectionDescriptor.html" title="class in org.intermine.metadata">CollectionDescriptor</a>&nbsp;col,
                                                               int&nbsp;version)</pre>
<div class="block">Creates a column name for the "outward" key of a many-to-many collection descriptor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>col</code> - CollectionDescriptor</dd>
<dd><code>version</code> - the database version number</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a valid column name</dd>
</dl>
</li>
</ul>
<a id="generateSqlCompatibleName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateSqlCompatibleName</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;generateSqlCompatibleName&#8203;(java.lang.String&nbsp;n)</pre>
<div class="block">Convert any sql keywords to valid names for tables/columns.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - the string to convert</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a valid sql name</dd>
</dl>
</li>
</ul>
<a id="objectToString(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>objectToString</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;objectToString&#8203;(java.lang.Object&nbsp;o)</pre>
<div class="block">Generate an SQL compatible representation of an object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>o</code> - the Object</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a valid SQL String</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the object is not representable</dd>
</dl>
</li>
</ul>
<a id="analyse(org.intermine.sql.Database,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>analyse</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;analyse&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                           boolean&nbsp;full)
                    throws java.sql.SQLException</pre>
<div class="block">Analyse given database, perform vacuum full analyse if full parameter true.
 WARNING: currently PostgreSQL specific</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>db</code> - the database to analyse</dd>
<dd><code>full</code> - if true perform VACUUM FULL ANALYSE</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if db problem</dd>
</dl>
</li>
</ul>
<a id="analyse(org.intermine.sql.Database,org.intermine.metadata.ClassDescriptor,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>analyse</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;analyse&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                           <a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cld,
                           boolean&nbsp;full)
                    throws java.sql.SQLException</pre>
<div class="block">Analyse database table for a given class and all associated indirection tables.
 WARNING: currently PostgreSQL specific</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>db</code> - the database to analyse</dd>
<dd><code>cld</code> - description of class to analyse</dd>
<dd><code>full</code> - if true perform VACUUM FULL ANALYSE</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if db problem</dd>
</dl>
</li>
</ul>
<a id="getIndirectionTableNames(org.intermine.metadata.ClassDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndirectionTableNames</h4>
<pre class="methodSignature">public static&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;getIndirectionTableNames&#8203;(<a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cld)</pre>
<div class="block">Given a ClassDescriptor find names of all related indirection tables.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cld</code> - class to find tables for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a set of all indirection table names</dd>
</dl>
</li>
</ul>
<a id="grant(org.intermine.sql.Database,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>grant</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;grant&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                         java.lang.String&nbsp;user,
                         java.lang.String&nbsp;perm)
                  throws java.sql.SQLException</pre>
<div class="block">Grant permission on all tables for given user on specified database.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>db</code> - the database to grant permissions on</dd>
<dd><code>user</code> - the username to grant permission to</dd>
<dd><code>perm</code> - permission to grant</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if db problem</dd>
</dl>
</li>
</ul>
<a id="createBagTable(org.intermine.sql.Database,java.sql.Connection,java.lang.String,java.util.Collection,java.lang.Class)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBagTable</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;createBagTable&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                                  java.sql.Connection&nbsp;con,
                                  java.lang.String&nbsp;tableName,
                                  java.util.Collection&lt;?&gt;&nbsp;bag,
                                  java.lang.Class&lt;?&gt;&nbsp;c)
                           throws java.sql.SQLException</pre>
<div class="block">Create a new table the holds the contents of the given Collection (bag).  The "Class c"
 parameter selects which objects from the bag are put in the new table.  eg. if the bag
 contains Integers and Strings and the parameter is Integer.class then the table will contain
 only the Integers from the bag.  A Class of InterMineObject is handled specially: the new
 table will contain the IDs of the objects, not the objects themselves.  The table will have
 one column ("value").</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>db</code> - the Database to access</dd>
<dd><code>con</code> - the Connection to use</dd>
<dd><code>tableName</code> - the name to use for the new table</dd>
<dd><code>bag</code> - the Collection to create a table for</dd>
<dd><code>c</code> - the type of objects to put in the new table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd>
</dl>
</li>
</ul>
<a id="createBagValuesTables(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBagValuesTables</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;createBagValuesTables&#8203;(java.sql.Connection&nbsp;con)
                                  throws java.sql.SQLException</pre>
<div class="block">Create the table 'bagvalues' containing the values of the key field objects
 contained in a bag and an extra values</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - the Connection to use</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd>
</dl>
</li>
</ul>
<a id="isBagValuesEmpty(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBagValuesEmpty</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;isBagValuesEmpty&#8203;(java.sql.Connection&nbsp;con)
                                throws java.sql.SQLException</pre>
<div class="block">Verify if 'bagvalues' table is empty</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - the Connection to use</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if empty</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd>
</dl>
</li>
</ul>
<a id="addColumn(org.intermine.sql.Database,java.lang.String,java.lang.String,org.intermine.sql.DatabaseUtil.Type)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addColumn</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;addColumn&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
                             java.lang.String&nbsp;tableName,
                             java.lang.String&nbsp;columnName,
                             <a href="DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)
                      throws java.sql.SQLException</pre>
<div class="block">Add a column in the table specified in input. A connection is obtained to the database
 and automatically released after the addition of the column.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>database</code> - the database to use</dd>
<dd><code>tableName</code> - the table where to add the column</dd>
<dd><code>columnName</code> - the column to add</dd>
<dd><code>type</code> - the type</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd>
</dl>
</li>
</ul>
<a id="addColumn(java.sql.Connection,java.lang.String,java.lang.String,org.intermine.sql.DatabaseUtil.Type)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addColumn</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;addColumn&#8203;(java.sql.Connection&nbsp;con,
                             java.lang.String&nbsp;tableName,
                             java.lang.String&nbsp;columnName,
                             <a href="DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)
                      throws java.sql.SQLException</pre>
<div class="block">Add a column to an existing database table, if it does not already exist.
 It is the users responsibility to close the connection after use.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - A connection to the database.</dd>
<dd><code>tableName</code> - The table to add the database too</dd>
<dd><code>columnName</code> - The column to add</dd>
<dd><code>type</code> - The SQL type to add</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if something goes wrong</dd>
</dl>
</li>
</ul>
<a id="isLegalColumnName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLegalColumnName</h4>
<pre class="methodSignature">protected static&nbsp;boolean&nbsp;isLegalColumnName&#8203;(java.lang.String&nbsp;name)</pre>
<div class="block">Check that a column name provided to us is a legal column name, to prevent SQL injection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - The desired column name.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether or not we should accept it.</dd>
</dl>
</li>
</ul>
<a id="updateColumnValue(org.intermine.sql.Database,java.lang.String,java.lang.String,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateColumnValue</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;updateColumnValue&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
                                     java.lang.String&nbsp;tableName,
                                     java.lang.String&nbsp;columnName,
                                     java.lang.Object&nbsp;newValue)
                              throws java.sql.SQLException</pre>
<div class="block">Set the default value in a column for all values where the current value is null.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>database</code> - the database to use</dd>
<dd><code>tableName</code> - the table where update the column</dd>
<dd><code>columnName</code> - the column to Update</dd>
<dd><code>newValue</code> - the value to update</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd>
</dl>
</li>
</ul>
<a id="updateColumnValue(java.sql.Connection,java.lang.String,java.lang.String,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateColumnValue</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;updateColumnValue&#8203;(java.sql.Connection&nbsp;con,
                                     java.lang.String&nbsp;tableName,
                                     java.lang.String&nbsp;columnName,
                                     java.lang.Object&nbsp;newValue)
                              throws java.sql.SQLException</pre>
<div class="block">Set the default value in a column for all values.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - A connection to the database to use</dd>
<dd><code>tableName</code> - the table where update the column</dd>
<dd><code>columnName</code> - the column to Update</dd>
<dd><code>newValue</code> - the value to update</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem

 Note, it is the user's responsibility to ensure the connection given is closed.</dd>
</dl>
</li>
</ul>
<a id="verifyColumnType(java.sql.Connection,java.lang.String,java.lang.String,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyColumnType</h4>
<pre class="methodSignature">public static&nbsp;boolean&nbsp;verifyColumnType&#8203;(java.sql.Connection&nbsp;con,
                                       java.lang.String&nbsp;tableName,
                                       java.lang.String&nbsp;columnName,
                                       int&nbsp;columnType)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - database connection</dd>
<dd><code>tableName</code> - table name</dd>
<dd><code>columnName</code> - column name</dd>
<dd><code>columnType</code> - column type</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if column exists</dd>
</dl>
</li>
</ul>
<a id="getTableDefinition(org.intermine.sql.Database,org.intermine.metadata.ClassDescriptor)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getTableDefinition</h4>
<pre class="methodSignature">public static&nbsp;java.lang.String&nbsp;getTableDefinition&#8203;(<a href="Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                                                  <a href="../metadata/ClassDescriptor.html" title="class in org.intermine.metadata">ClassDescriptor</a>&nbsp;cd)
                                           throws java.lang.ClassNotFoundException</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>db</code> - database</dd>
<dd><code>cd</code> - class descriptor</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>SQL to create table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.ClassNotFoundException</code> - table isn't in database</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
